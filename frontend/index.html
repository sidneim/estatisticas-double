<body class="bg-gray-900 text-white">
  <div id="loader" class="flex items-center justify-center h-screen">
    <p>Carregando...</p>
  </div>

  <div id="results" class="hidden p-4 max-w-5xl mx-auto grid grid-cols-auto-fit gap-4"></div>

  <script>
    const loader = document.getElementById('loader');
    const results = document.getElementById('results');

    async function fetchResults(site) {
      try {
        const res = await fetch(`/api/results/${site}`);
        const data = await res.json();

        loader.style.display = 'none';
        results.style.display = 'grid';

        results.innerHTML = data.map(item => {
          const colorClass = getColorClass(item.color, site);
          return `
            <div class="p-4 rounded shadow ${colorClass}" title="Horário: ${new Date(item.created_at).toLocaleTimeString()} - Número: ${item.roll}">
              <div class="text-sm">${new Date(item.created_at).toLocaleTimeString()}</div>
              <div class="text-xl font-bold">${item.roll}</div>
            </div>
          `;
        }).join('');
      } catch (e) {
        loader.innerText = 'Erro ao carregar dados.';
      }
    }

    function getColorClass(color, site) {
      if(site === 'jonbet') {
        switch(color) {
          case 0: return 'bg-gray-700';
          case 1: return 'bg-black';
          case 2: return 'bg-green-600';
          default: return 'bg-gray-600';
        }
      } else {
        switch(color) {
          case 0: return 'bg-gray-700';
          case 1: return 'bg-black';
          case 2: return 'bg-red-600';
          default: return 'bg-gray-600';
        }
      }
    }

    // Troque 'blaze' por 'jonbet' para testar o outro site
    fetchResults('blaze');
  </script>
</body>